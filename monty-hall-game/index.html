<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monty Hall Game Show</title>
    <link rel="stylesheet" href="css/style.css">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
</head>
<body>
    <div class="container">
        <!-- SCREEN 1: Welcome -->
        <div id="screen-welcome" class="screen active">
            <div class="header">
                <h1>üé™ MONTY HALL</h1>
                <p class="subtitle">Tr√≤ Ch∆°i X√°c Su·∫•t Kinh ƒêi·ªÉn</p>
            </div>

            <div class="game-intro">
                <div class="doors-preview">
                    <div class="door-small">üö™</div>
                    <div class="door-small">üö™</div>
                    <div class="door-small">üö™</div>
                </div>

                <div class="intro-rules">
                    <div class="rule-step">
                        <span class="step-number">1</span>
                        <span class="step-text">C√≥ <strong>3 c·ª≠a</strong>: 1 c·ª≠a c√≥ <span class="highlight-car">üöó XE H∆†I</span>, 2 c·ª≠a c√≥ <span class="highlight-goat">üêê D√ä</span></span>
                    </div>
                    <div class="rule-step">
                        <span class="step-number">2</span>
                        <span class="step-text">B·∫°n <strong>ch·ªçn 1 c·ª≠a</strong>, MC s·∫Ω m·ªü 1 c·ª≠a c√≥ d√™</span>
                    </div>
                    <div class="rule-step">
                        <span class="step-number">3</span>
                        <span class="step-text">B·∫°n c√≥ mu·ªën <span class="highlight-switch">ƒê·ªîI</span> sang c·ª≠a c√≤n l·∫°i kh√¥ng?</span>
                    </div>
                </div>

                <div class="intro-question">
                    <p>üí° <strong>C√¢u h·ªèi:</strong> ƒê·ªïi hay gi·ªØ c·ª≠a c√≥ l·ª£i h∆°n?</p>
                </div>
            </div>

            <div class="input-section">
                <input type="text" id="player-name" placeholder="‚úèÔ∏è Nh·∫≠p t√™n c·ªßa b·∫°n..." maxlength="30">
                <button id="btn-start" class="btn-primary" disabled>üéÆ B·∫ÆT ƒê·∫¶U CH∆†I</button>
            </div>

            <div class="session-info">
                <small>Session: <span id="session-id">ƒëang k·∫øt n·ªëi...</span></small>
            </div>
        </div>

        <!-- SCREEN 2: Choose Door -->
        <div id="screen-choose" class="screen">
            <div class="game-header">
                <div class="progress-bar-container">
                    <div class="progress-bar" id="progress-bar"></div>
                    <span class="progress-text">L∆∞·ª£t <span id="current-round">1</span>/<span id="total-rounds">5</span></span>
                </div>
                <div class="score-display">
                    <span class="win">‚úÖ <span id="wins">0</span></span>
                    <span class="lose">‚ùå <span id="losses">0</span></span>
                </div>
            </div>

            <div class="player-badge">
                <span id="display-name"></span>
            </div>

            <h2 class="instruction">üëÜ CH·ªåN M·ªòT C·ª¨A!</h2>

            <div class="doors-container">
                <div class="door" data-door="1">
                    <div class="door-frame">
                        <div class="door-panel">
                            <span class="door-number">1</span>
                        </div>
                    </div>
                    <div class="door-content-hidden">
                        <span class="door-content"></span>
                    </div>
                </div>
                <div class="door" data-door="2">
                    <div class="door-frame">
                        <div class="door-panel">
                            <span class="door-number">2</span>
                        </div>
                    </div>
                    <div class="door-content-hidden">
                        <span class="door-content"></span>
                    </div>
                </div>
                <div class="door" data-door="3">
                    <div class="door-frame">
                        <div class="door-panel">
                            <span class="door-number">3</span>
                        </div>
                    </div>
                    <div class="door-content-hidden">
                        <span class="door-content"></span>
                    </div>
                </div>
            </div>

            <p class="hint">üëÜ Ch·∫°m v√†o c·ª≠a ƒë·ªÉ ch·ªçn</p>
        </div>

        <!-- SCREEN 3: Switch Decision -->
        <div id="screen-switch" class="screen">
            <div class="game-header">
                <div class="progress-bar-container">
                    <div class="progress-bar" id="progress-bar-2"></div>
                    <span class="progress-text">L∆∞·ª£t <span id="current-round-2">1</span>/<span id="total-rounds-2">5</span></span>
                </div>
                <div class="score-display">
                    <span class="win">‚úÖ <span id="wins-2">0</span></span>
                    <span class="lose">‚ùå <span id="losses-2">0</span></span>
                </div>
            </div>

            <div class="mc-message">
                <div class="mc-avatar">üé©</div>
                <div class="mc-speech">
                    <p>B·∫°n ƒë√£ ch·ªçn <strong class="highlight-chosen">C·ª¨A <span id="chosen-door">1</span></strong></p>
                    <p>T√¥i m·ªü <strong class="highlight-opened">C·ª¨A <span id="opened-door">3</span></strong> ‚Äî c√≥ üêê D√ä!</p>
                    <p class="question">ü§î B·∫°n c√≥ mu·ªën <strong class="highlight-switch">ƒê·ªîI</strong> sang <strong>C·ª¨A <span id="other-door">2</span></strong>?</p>
                </div>
            </div>

            <div class="doors-container switch-view">
                <div class="door" data-door="1" id="switch-door-1">
                    <div class="door-frame">
                        <div class="door-panel">
                            <span class="door-number">1</span>
                        </div>
                    </div>
                    <div class="door-content-hidden">
                        <span class="door-content"></span>
                    </div>
                </div>
                <div class="door" data-door="2" id="switch-door-2">
                    <div class="door-frame">
                        <div class="door-panel">
                            <span class="door-number">2</span>
                        </div>
                    </div>
                    <div class="door-content-hidden">
                        <span class="door-content"></span>
                    </div>
                </div>
                <div class="door" data-door="3" id="switch-door-3">
                    <div class="door-frame">
                        <div class="door-panel">
                            <span class="door-number">3</span>
                        </div>
                    </div>
                    <div class="door-content-hidden">
                        <span class="door-content"></span>
                    </div>
                </div>
            </div>

            <div class="decision-buttons">
                <button id="btn-switch" class="btn-switch">üîÑ ƒê·ªîI C·ª¨A</button>
                <button id="btn-stay" class="btn-stay">‚úã GI·ªÆ C·ª¨A <span id="stay-door-num">1</span></button>
            </div>
        </div>

        <!-- SCREEN 4: Result -->
        <div id="screen-result" class="screen">
            <div class="result-header" id="result-header">
                <h2 id="result-title">üéâ TH·∫ÆNG!</h2>
                <p id="result-subtitle"></p>
            </div>

            <div class="doors-container result-view">
                <div class="door" data-door="1" id="result-door-1">
                    <div class="door-frame">
                        <div class="door-panel">
                            <span class="door-number">1</span>
                        </div>
                    </div>
                    <div class="door-content-hidden">
                        <span class="door-content"></span>
                    </div>
                </div>
                <div class="door" data-door="2" id="result-door-2">
                    <div class="door-frame">
                        <div class="door-panel">
                            <span class="door-number">2</span>
                        </div>
                    </div>
                    <div class="door-content-hidden">
                        <span class="door-content"></span>
                    </div>
                </div>
                <div class="door" data-door="3" id="result-door-3">
                    <div class="door-frame">
                        <div class="door-panel">
                            <span class="door-number">3</span>
                        </div>
                    </div>
                    <div class="door-content-hidden">
                        <span class="door-content"></span>
                    </div>
                </div>
            </div>

            <div class="result-explanation">
                <p id="explanation-text"></p>
            </div>

            <button id="btn-next" class="btn-primary">‚ñ∂Ô∏è L∆Ø·ª¢T TI·∫æP THEO</button>
        </div>

        <!-- SCREEN 5: Final Stats -->
        <div id="screen-final" class="screen">
            <h2>üèÜ K·∫æT QU·∫¢ C·ª¶A B·∫†N</h2>

            <div class="final-stats">
                <div class="stat-card">
                    <div class="stat-label">üë§ T√™n</div>
                    <div class="stat-value name-value" id="final-name">-</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">üéÆ T·ªïng l∆∞·ª£t</div>
                    <div class="stat-value" id="final-total">5</div>
                </div>
                <div class="stat-card highlight">
                    <div class="stat-label">üèÜ S·ªë l·∫ßn th·∫Øng</div>
                    <div class="stat-value big" id="final-wins">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">üìä T·ªâ l·ªá th·∫Øng</div>
                    <div class="stat-value" id="final-rate">0%</div>
                </div>
            </div>

            <div class="strategy-breakdown">
                <h3>üìà Ph√¢n t√≠ch chi·∫øn thu·∫≠t</h3>
                <div class="strategy-row">
                    <span class="strategy-label">üîÑ ƒê·ªïi c·ª≠a:</span>
                    <div class="strategy-bar">
                        <div class="bar-fill switch-bar" id="switch-bar"></div>
                    </div>
                    <span class="strategy-stat" id="switch-stat">0/0</span>
                </div>
                <div class="strategy-row">
                    <span class="strategy-label">‚úã Gi·ªØ c·ª≠a:</span>
                    <div class="strategy-bar">
                        <div class="bar-fill stay-bar" id="stay-bar"></div>
                    </div>
                    <span class="strategy-stat" id="stay-stat">0/0</span>
                </div>
                <div class="theory-note">
                    <p>üìö <strong>L√Ω thuy·∫øt:</strong> ƒê·ªïi c·ª≠a = <span class="highlight-switch">66.7%</span>, Gi·ªØ c·ª≠a = <span class="highlight-stay">33.3%</span></p>
                </div>
            </div>

            <div class="final-buttons">
                <button id="btn-play-more" class="btn-primary">üîÑ CH∆†I TH√äM 5 L∆Ø·ª¢T</button>
                <button id="btn-submit" class="btn-secondary">üì§ G·ª¨I K·∫æT QU·∫¢</button>
            </div>
        </div>

        <!-- Confetti container -->
        <div id="confetti-container"></div>
    </div>

    <script src="js/firebase-config.js"></script>
    <script src="js/game.js"></script>
</body>
</html>
