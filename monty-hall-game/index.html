<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monty Hall Game Show</title>
    <link rel="stylesheet" href="css/style.css">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
</head>
<body>
    <div class="container">
        <!-- SCREEN 1: Welcome -->
        <div id="screen-welcome" class="screen active">
            <div class="header">
                <h1>MONTY HALL SHOW</h1>
                <p class="subtitle">Game Show Xac Suat</p>
            </div>

            <div class="game-intro">
                <div class="doors-preview">
                    <div class="door-small">1</div>
                    <div class="door-small">2</div>
                    <div class="door-small">3</div>
                </div>
                <div class="intro-text">
                    <p><strong>Luat choi:</strong></p>
                    <p>Co 3 cua: 1 cua co <span class="highlight-car">XE</span>, 2 cua co <span class="highlight-goat">DE</span></p>
                    <p>Ban chon 1 cua, MC se mo 1 cua co de.</p>
                    <p>Ban co muon <strong>DOI</strong> sang cua con lai?</p>
                </div>
            </div>

            <div class="input-section">
                <input type="text" id="player-name" placeholder="Nhap ten cua ban..." maxlength="30">
                <button id="btn-start" class="btn-primary" disabled>BAT DAU CHOI</button>
            </div>

            <div class="session-info">
                <small>Session: <span id="session-id">dang ket noi...</span></small>
            </div>
        </div>

        <!-- SCREEN 2: Choose Door -->
        <div id="screen-choose" class="screen">
            <div class="game-header">
                <div class="stats">
                    <span>Luot: <span id="current-round">1</span>/<span id="total-rounds">5</span></span>
                    <span class="win">Thang: <span id="wins">0</span></span>
                    <span class="lose">Thua: <span id="losses">0</span></span>
                </div>
                <div class="player-name-display">
                    <span id="display-name"></span>
                </div>
            </div>

            <h2 class="instruction">CHON MOT CUA!</h2>

            <div class="doors-container">
                <div class="door" data-door="1">
                    <div class="door-front">
                        <span class="door-number">1</span>
                    </div>
                    <div class="door-back">
                        <span class="door-content"></span>
                    </div>
                </div>
                <div class="door" data-door="2">
                    <div class="door-front">
                        <span class="door-number">2</span>
                    </div>
                    <div class="door-back">
                        <span class="door-content"></span>
                    </div>
                </div>
                <div class="door" data-door="3">
                    <div class="door-front">
                        <span class="door-number">3</span>
                    </div>
                    <div class="door-back">
                        <span class="door-content"></span>
                    </div>
                </div>
            </div>

            <p class="hint">(Tap vao cua de chon)</p>
        </div>

        <!-- SCREEN 3: Switch Decision -->
        <div id="screen-switch" class="screen">
            <div class="game-header">
                <div class="stats">
                    <span>Luot: <span id="current-round-2">1</span>/<span id="total-rounds-2">5</span></span>
                    <span class="win">Thang: <span id="wins-2">0</span></span>
                    <span class="lose">Thua: <span id="losses-2">0</span></span>
                </div>
            </div>

            <div class="mc-message">
                <div class="mc-avatar">MC</div>
                <div class="mc-speech">
                    <p>Ban da chon <strong>CUA <span id="chosen-door">1</span></strong></p>
                    <p>Toi mo <strong>CUA <span id="opened-door">3</span></strong> - co DE!</p>
                    <p class="question">Ban co muon <strong>DOI</strong> sang <strong>CUA <span id="other-door">2</span></strong> khong?</p>
                </div>
            </div>

            <div class="doors-container switch-view">
                <div class="door" data-door="1" id="switch-door-1">
                    <div class="door-front">
                        <span class="door-number">1</span>
                    </div>
                    <div class="door-back">
                        <span class="door-content"></span>
                    </div>
                </div>
                <div class="door" data-door="2" id="switch-door-2">
                    <div class="door-front">
                        <span class="door-number">2</span>
                    </div>
                    <div class="door-back">
                        <span class="door-content"></span>
                    </div>
                </div>
                <div class="door" data-door="3" id="switch-door-3">
                    <div class="door-front">
                        <span class="door-number">3</span>
                    </div>
                    <div class="door-back">
                        <span class="door-content"></span>
                    </div>
                </div>
            </div>

            <div class="decision-buttons">
                <button id="btn-switch" class="btn-switch">DOI CUA</button>
                <button id="btn-stay" class="btn-stay">GIU CUA <span id="stay-door-num">1</span></button>
            </div>
        </div>

        <!-- SCREEN 4: Result -->
        <div id="screen-result" class="screen">
            <div class="result-header" id="result-header">
                <h2 id="result-title">THANG!</h2>
                <p id="result-subtitle"></p>
            </div>

            <div class="doors-container result-view">
                <div class="door" data-door="1" id="result-door-1">
                    <div class="door-front">
                        <span class="door-number">1</span>
                    </div>
                    <div class="door-back">
                        <span class="door-content"></span>
                    </div>
                </div>
                <div class="door" data-door="2" id="result-door-2">
                    <div class="door-front">
                        <span class="door-number">2</span>
                    </div>
                    <div class="door-back">
                        <span class="door-content"></span>
                    </div>
                </div>
                <div class="door" data-door="3" id="result-door-3">
                    <div class="door-front">
                        <span class="door-number">3</span>
                    </div>
                    <div class="door-back">
                        <span class="door-content"></span>
                    </div>
                </div>
            </div>

            <div class="result-explanation">
                <p id="explanation-text"></p>
            </div>

            <button id="btn-next" class="btn-primary">CHOI TIEP</button>
        </div>

        <!-- SCREEN 5: Final Stats -->
        <div id="screen-final" class="screen">
            <h2>KET QUA CUA BAN</h2>

            <div class="final-stats">
                <div class="stat-card">
                    <div class="stat-label">Ten</div>
                    <div class="stat-value" id="final-name">-</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Tong luot</div>
                    <div class="stat-value" id="final-total">5</div>
                </div>
                <div class="stat-card highlight">
                    <div class="stat-label">Thang</div>
                    <div class="stat-value" id="final-wins">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Ty le</div>
                    <div class="stat-value" id="final-rate">0%</div>
                </div>
            </div>

            <div class="strategy-breakdown">
                <h3>Phan tich chien thuat:</h3>
                <div class="strategy-row">
                    <span class="strategy-label">Doi cua:</span>
                    <div class="strategy-bar">
                        <div class="bar-fill switch-bar" id="switch-bar"></div>
                    </div>
                    <span class="strategy-stat" id="switch-stat">0/0</span>
                </div>
                <div class="strategy-row">
                    <span class="strategy-label">Giu cua:</span>
                    <div class="strategy-bar">
                        <div class="bar-fill stay-bar" id="stay-bar"></div>
                    </div>
                    <span class="strategy-stat" id="stay-stat">0/0</span>
                </div>
                <p class="theory-note">Ly thuyet: Doi cua = 66.7%, Giu cua = 33.3%</p>
            </div>

            <div class="final-buttons">
                <button id="btn-play-more" class="btn-primary">CHOI THEM 5 LUOT</button>
                <button id="btn-submit" class="btn-secondary">GUI KET QUA</button>
            </div>
        </div>

        <!-- Confetti container -->
        <div id="confetti-container"></div>
    </div>

    <script src="js/firebase-config.js"></script>
    <script src="js/game.js"></script>
</body>
</html>
